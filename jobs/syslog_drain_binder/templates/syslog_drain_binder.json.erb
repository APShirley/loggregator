{
    "InstanceName": "<%= name %>.<%= spec.index %>",
    "DrainUrlTtlSeconds": <%= p("syslog_drain_binder.drain_url_ttl_seconds") %>,
    "UpdateIntervalSeconds": <%= p("syslog_drain_binder.update_interval_seconds") %>,


<%
  etcd_config = nil
  if_link("etcd") do |etcd|
    etcd_config = {}
    etcd_config["machines"] = etcd.p("etcd.machines")
    etcd_config["maxconcurrentrequests"] = etcd.p("etcd.maxconcurrentrequests")
  end

  etcd_config = p("loggregator.etcd") unless etcd_config
%>

    "EtcdUrls": [<%= etcd_config["machines"].map{|addr| "\"http://#{addr}:4001\""}.join(",")%>],
    "EtcdMaxConcurrentRequests": <%= etcd_config["maxconcurrentrequests"] %>,

    "MetronAddress": "<%= p("metron_endpoint.host") %>:<%= p("metron_endpoint.dropsonde_port") %>",

    "CloudControllerAddress": "<%= p("cc.srv_api_uri") %>",
    "BulkApiUsername": "<%= p("cc.bulk_api_user", "bulk_api") %>",
    "BulkApiPassword": "<%= p("cc.bulk_api_password") %>",
    "PollingBatchSize": <%= p("syslog_drain_binder.polling_batch_size") %>,

    "SkipCertVerify": <%= p("ssl.skip_cert_verify") %>
}
